# 基于 ESP32 的多传感联动智慧家园系统

- ## 一、这个毕业设计主要有哪些功能？

### （一）核心功能模块：以 “感知 - 联动 - 控制” 为核心

1. #### 环境监测与自动调节模块（核心感知 + 联动）

- - 传感采集：ESP32 连接 DHT11 温湿度传感器、MQ-2 燃气传感器、PM2.5 传感器，实时采集室内 “温度（0-60℃）、湿度（20%-90% RH）、燃气浓度、空气质量” 数据；


- - 自动联动：预设阈值触发设备动作（如温度＞28℃自动开空调继电器、燃气浓度＞0.1% 自动开排风扇 + 关闭燃气总阀、PM2.5＞75μg/m³ 自动开空气净化器）；


- - 数据展示：手机 APP 实时显示环境数据，支持历史曲线查询（近 24 小时温湿度变化）。

1. #### 人体感应与智能控制模块（场景化联动）

- - 人体检测：ESP32 连接 HC-SR501 人体红外传感器，监测室内人员活动（如客厅、卧室、走廊）；


- - 场景联动：


- - - 夜间模式：22:00-6:00 期间，人体红外检测到活动（如起夜），自动开启走廊小夜灯（亮度 30%），人离开后 10 秒关灯；


- - - 离家模式：人体红外检测 1 小时无活动，自动关闭所有灯光、空调、电器（保留冰箱供电）。

1. 安防监测与报警模块（安全防护）

- - 异常检测：ESP32 连接门窗磁传感器（监测门窗开合）、震动传感器（监测玻璃破碎）；


- - 报警机制：


- - - 本地报警：触发异常时，ESP32 控制蜂鸣器发出声光报警（音量 80dB），LED 警示灯闪烁；


- - - 远程通知：通过 Wi-Fi 推送报警信息至手机 APP（含 “异常类型 + 发生时间”）。

（二）辅助功能模块：提升易用性与稳定性

1. 多端控制功能

- - 手机 APP 控制：支持 Android 系统，实现 “单设备控制（如手动开灯光）、场景模式切换（离家 / 回家 / 睡眠模式）、阈值修改（如调整温湿度触发值）”；

1. 数据管理与备份功能

- - 云端同步：重要数据（如月度环境报告）同步至 MySQL 数据库，支持 APP 端随时查看。

1. 故障自诊断功能

- - 传感器故障检测：若某传感器（如温湿度传感器）10 分钟无数据上传，APP 提示 “传感器离线”，并显示故障设备位置；

三、主要涉及哪些技术？

（一）硬件核心技术：以 ESP32 为中枢

ESP32 芯片核心应用

- - 功能支撑：作为系统 “数据处理 + 通信中枢”，负责接收传感器数据、解析控制指令、驱动执行器动作；


- - 关键特性：利用内置 Wi-Fi（802.11 b/g/n）实现与手机 APP、云端的通信；通过 Bluetooth 低功耗模式连接近距离传感器（如人体红外），降低功耗。

传感器与执行器技术

- - 传感器选型与适配：


- - - DHT11 温湿度传感器（单总线通信，精度 ±2℃/±5% RH，适配 ESP32 的 GPIO 引脚）；


- - - MQ-2 燃气传感器（模拟信号输出，通过 ESP32 的 ADC 引脚转换为数字信号，检测可燃气体浓度）；


- - - HC-SR501 人体红外传感器（数字信号输出，触发距离 3-7 米，可通过 ESP32 调节检测灵敏度）；


- - - 磁传感器（开/关门检测）


- - - 震动传感器（监测玻璃破碎）


- - 执行器控制：


- - - 继电器模块（通过 ESP32 的 GPIO 引脚控制 220V 家电通断，如空调、排风扇）；


- - - PWM 调光模块（ESP32 输出 PWM 信号，调节 LED 灯光亮度）。

（二）软件与开发技术

1. 嵌入式开发技术

- - 开发环境：Arduino IDE（简化 ESP32 程序编写，支持传感器库调用，如 DHT 库、WiFi 库）；


- - 编程语言：C/C++（编写 ESP32 控制逻辑，如传感器数据采集、阈值判断、联动指令发送）；


- - 核心代码逻辑：通过 “循环读取传感器数据→对比预设阈值→触发执行器动作” 的流程，实现自动联动（如 if (温度 > 28℃){digitalWrite (空调继电器引脚，HIGH);}）。

1. 移动端与云端技术

- - APP 开发：实现数据展示、控制指令发送；集成 MQTT 客户端，与 ESP32 通信）；


- - 云端服务：


- - - MQTT 协议（轻量级物联网通信协议，实现 ESP32 与 APP 的实时数据传输，如环境数据上传、控制指令下发）；


- - - MySQL 数据库（部署在阿里云服务器，存储历史环境数据、报警记录，支持 APP 端查询）；

（三）通信与联动技术

短距离通信：ESP32 内置 Wi-Fi（与手机 APP、路由器通信）；

联动逻辑实现：基于 “事件触发” 机制，通过 Arduino 代码预设联动规则（如 “门窗磁检测到开门 + 人体红外无活动→判定为非法入侵→触发报警”）；

抗干扰处理：采用软件滤波（如对温湿度数据进行多次采样取平均值）、硬件防抖（如在传感器引脚并联电容），提升数据准确性。

- ​